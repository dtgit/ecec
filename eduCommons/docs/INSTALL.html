<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.5: http://docutils.sourceforge.net/" />
<title>eduCommons 3.1.1-final Installation</title>
<link rel="stylesheet" href="./default.css" type="text/css" />
</head>
<body>
<div class="document" id="educommons-3-1-1-final-installation">
<h1 class="title">eduCommons 3.1.1-final Installation</h1>
<h2 class="subtitle" id="installation-instructions">Installation Instructions</h2>

<div class="section" id="installation">
<h1>Installation</h1>
<p>This section describes how to install a server based instance of eduCommons on
a UNIX based platform (linux, OSX).</p>
<p>Installation involves the following packages:</p>
<blockquote>
<ul class="simple">
<li>Python-2.4.4.tar.gz (<a class="reference external" href="http://python.org/2.4.4/">http://python.org/2.4.4/</a>)</li>
<li>Zope-2.10.5-final.tar.gz (<a class="reference external" href="http://www.zope.org/Products/Zope/2.10.5">http://www.zope.org/Products/Zope/2.10.5</a>)</li>
</ul>
</blockquote>
<p>Python library packages:</p>
<blockquote>
<ul class="simple">
<li>Imaging-1.1.6.tar.gz (<a class="reference external" href="http://www.pythonware.com/products/pil/">http://www.pythonware.com/products/pil/</a>)</li>
<li>PyXML-0.8.4.tar.gz (<a class="reference external" href="http://sourceforge.net/project/showfiles.php?group_id=6473">http://sourceforge.net/project/showfiles.php?group_id=6473</a>)</li>
<li>elementtree-1.2.6.tar.gz (<a class="reference external" href="http://effbot.org/downloads/#elementtree">http://effbot.org/downloads/#elementtree</a>)</li>
<li>libxml2-python-2.6.15.tar.gz (<a class="reference external" href="ftp://xmlsoft.org/libxml2/python/">ftp://xmlsoft.org/libxml2/python/</a>)</li>
<li>Beautiful Soup 3.0.4 (<a class="reference external" href="http://www.crummy.com/software/BeautifulSoup/download/">http://www.crummy.com/software/BeautifulSoup/download/</a>)</li>
</ul>
</blockquote>
<p>Plone package:</p>
<blockquote>
<ul class="simple">
<li>Plone-3.0.6.tar.gz (<a class="reference external" href="http://plone.org/products/plone/releases/3.0.6">http://plone.org/products/plone/releases/3.0.6</a>)</li>
</ul>
</blockquote>
<p>eduCommons-related Packages:</p>
<p>(Correct versions of these products are shipped in the eduCommons archive unless ohterwise noted)</p>
<blockquote>
<ul class="simple">
<li>eduCommons (3.1.0-final)</li>
<li>leftskin (1.0.2-final)</li>
<li>ContentLicensing (2.0.0)</li>
<li>ZipFileTransport (2.0.1)</li>
<li>IMSTransport (2.0.1)</li>
<li>PloneBookmarklets (2.0.0)</li>
<li>ProxyIndex (1.2.1)</li>
<li>FileSystemStorage (2.6.2)</li>
<li>LinguaPlone (2.0)</li>
<li>easy_install (download here: <a class="reference external" href="http://peak.telecommunity.com/dist/ez_setup.py">http://peak.telecommunity.com/dist/ez_setup.py</a>)</li>
<li>collective.captcha (installed via easy_install)</li>
</ul>
</blockquote>
<div class="section" id="i-installation-steps">
<h2>I. Installation Steps</h2>
<ol class="arabic">
<li><p class="first">Installing Python:</p>
<p>It is likely that the Python programming language is already installed on
your server. Try typing:</p>
<pre class="literal-block">
$ python
</pre>
<p>on the command line to see what version you have installed (Ctrl-D will exit).
You should see something like the following:</p>
<pre class="literal-block">
Python 2.4.4 (#1, Oct  7 2006, 21:17:24)
[GCC 3.4.6 20060404 (Red Hat 3.4.6-3)] on linux2
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt;
</pre>
<p>eduCommons and its supporting software requires version 2.4.4. If your server
does not have Python, or if the version of Python installed is not 2.4.4, you
will have to install a new version.</p>
<p>Some platforms may have an updated version of Python available through their
package managers (yum, apt, fink). If you can not find a suitable version, or
if you prefer to build Python from source, simply download the source package
and use a command line interface to type in the following instructions:</p>
<pre class="literal-block">
tar -zxvf Python-2.4.4.tar.gz
cd Python-2.4.4
./configure
make
sudo make install
</pre>
<p>By default this will install a new version of Python in the /usr/local directory
on your server.</p>
</li>
<li><p class="first">Installing Python library packages</p>
<p>Once you have Python installed it will be necessary to include a number of
libraries that extend the functionality of your Python installation. If you
have installed Python using a package manager, it may be likely that some
(or all) of these packages may also be available for installation. As long
as suitable library versions can be found, it should be fine to use them. In
cases where it is not possible to load prebuilt packages, use the following
instructions below:</p>
<ol class="loweralpha">
<li><p class="first">Installing Python Imaging Libary (PIL)</p>
<p>PIL is now a required package for the latest version of Plone.</p>
<p>Unpack and install Imaging-1.1.6:</p>
<pre class="literal-block">
tar -zxvf Imaging-1.1.6.tar.gz
cd Imaging
/usr/local/bin/python setup.py build
sudo /usr/local/bin/python setup.py install
</pre>
<p>You may require additional packages to build the imaging library. See
the PIL website for additional installation instructions.</p>
</li>
<li><p class="first">Installing PyXML</p>
<p>Unpack and install PyXML:</p>
<pre class="literal-block">
tar -zxvf PyXML-0.8.4.tar.gz
cd PyXML-0.8.4
/usr/local/bin/python setup.py build
sudo /usr/local/bin/python setup.py install
</pre>
</li>
<li><p class="first">Installing elementtree</p>
<p>elementtree is now a required dependency for the latest version of Plone.</p>
<p>Unpack and install elementtree:</p>
<pre class="literal-block">
tar -zxvf elementtree-1.2.6.tar.gz
cd elementtree-1.2.6
/usr/local/bin/python setup.py build
sudo /usr/local/bin/python setup.py install
</pre>
</li>
<li><p class="first">Installing libxml2-python</p>
<p>If your target platform includes binary only distributions of libxml2 and
libxslt, you may need to also include the development packages in order for
the following to work.</p>
<p>Unpack and install libxml2-python:</p>
<pre class="literal-block">
tar -zxvf libxml2-python-2.6.15.tar.gz
cd libxml2-python-2.6.15
/usr/local/bin/python setup.py build
sudo /usr/local/bin/python setup.py install
</pre>
</li>
<li><p class="first">Install Beautiful Soup</p>
<p>Unpack and install Beautiful Soup 3.0.4 into your python library.</p>
<pre class="literal-block">
tar -zxvf BeautifulSoup-3.0.4.tar.gz
cd BeautifulSoup-3.0.4
/usr/local/bin/python setup.py build
sudo /usr/local/bin/python setup.py install
</pre>
</li>
</ol>
</li>
</ol>
<blockquote>
<ol class="loweralpha" start="6">
<li><p class="first">Install Easy Install</p>
<blockquote>
<p>Easy Install (easy_install) is a python module bundled with setuptools
that lets you automatically download, build, install, and manage Python packages.</p>
<p>Download <a class="reference external" href="http://peak.telecommunity.com/dist/ez_setup.py">http://peak.telecommunity.com/dist/ez_setup.py</a> and install it using the
correct version of python:</p>
<pre class="literal-block">
/usr/local/bin/python ez_setup.py
</pre>
</blockquote>
</li>
</ol>
<blockquote>
<ol class="loweralpha" start="7">
<li><p class="first">Install collective.captcha</p>
<p>collective.captcha is a Python package that is installable via Easy Install</p>
<pre class="literal-block">
/usr/local/bin/easy_install collective.captcha
</pre>
</li>
</ol>
</blockquote>
</blockquote>
<ol class="arabic" start="3">
<li><p class="first">Installing Zope</p>
<p>Unpack, build and install Zope:</p>
<pre class="literal-block">
tar -zxvf Zope-2.10.5-final.tar.gz
cd Zope-2.10.5-final
./configure --with-python=/usr/local/bin/python --prefix /opt/Zope-2.10.5
make
sudo make install
</pre>
</li>
<li><p class="first">Create a Zope instance</p>
<p>Create an instance in your Zope install:</p>
<pre class="literal-block">
sudo /opt/Zope-2.10.5/bin/mkzopeinstance.py
</pre>
<p>When prompted for a directory enter in the following:</p>
<pre class="literal-block">
/opt/Zope-2.10.5/web
</pre>
<p>You can substitute the <em>web</em> directory for a name that better describes your site.
The documentation will assume that you have chosen web as your instance directory.</p>
<p>When prompted for a username and password, enter in the username/password you will
use for managing your Zope instance.</p>
</li>
<li><p class="first">Install Zope Products</p>
<p>eduCommons relies on several Zope products in order to run. You will need to install
the following packages in the following order. The commands listed below assume that
you have the source tarballs in the root of your home account:</p>
<ol class="loweralpha">
<li><p class="first">Plone-3.0.6</p>
<p>Install Plone into your Zope instance Products folder.lib/python directory</p>
<pre class="literal-block">
cd /opt/Zope-2.10.5/web/Products
sudo tar -zxvf ~/Plone-3.0.6.tar.gz
</pre>
<p>Once you have unpacked Plone you need to move the products back up to the Products
directory as follows:</p>
<pre class="literal-block">
cd /opt/Zope-2.10.5/web/Products
sudo su
cd Plone-3.0.6
mv * ..
cd ..
sudo rm -rf Plone-3.0.6
</pre>
<p>The Plone tarball came with a lib/python directory. The contents of it need to go
up one level, into the lib/python of your Zope install.</p>
<pre class="literal-block">
cd /opt/Zope-2.10.5/web/Products
cp -r lib/* ../lib/
sudo rm -rf /opt/Zope-2.10.5/web/Products/lib
</pre>
<p>The Plone tarball also contains a Products directory. The contents of it need to go
up one level, into the web/Products directory of your Zope install.</p>
<pre class="literal-block">
cd /opt/Zope-2.10.5/web/Products
cp -r Products/* ../Products/
sudo rm -rf /opt/Zope-2.10.5/web/Products/Products
</pre>
</li>
<li><p class="first">eduCommons</p>
<p>This is the eduCommons product source package. To install use the following:</p>
<pre class="literal-block">
cd /opt/Zope-2.10.5/web/Products
sudo tar -zxvf ~/eduCommons-3.1.1-final.tar.gz
</pre>
<p>eduCommons includes a number of products which need to be put in the root
of the Products folder. To do this use the following:</p>
<pre class="literal-block">
cd /opt/Zope-2.10.5/web/Products
sudo mv eduCommons-3.1.1-final/* .
sudo rm -rf eduCommons-3.1.1-final
</pre>
<p>The products that now ship with eduCommons are as follows:</p>
<ol class="arabic">
<li><p class="first">eduCommons</p>
<p>A Plone product which implements the core functionality of eduCommons.</p>
</li>
<li><p class="first">leftskin</p>
<p>A Plone product which customizes the Plone layout.</p>
</li>
<li><p class="first">ContentLicensing</p>
<p>A Plone product that adds the ability to set copyright licenses on content
objects. Auto installed with the eduCommons product.</p>
</li>
<li><p class="first">ZipFileTransport</p>
<p>A Plone product that adds the ability to import and export content via
ZIP archives. Auto installed with the eduCommons product.</p>
</li>
<li><p class="first">IMSTransport</p>
<p>A Plone product that imports and exports contents in IMS content packages.
Auto installed with the eduCommons product.</p>
</li>
<li><p class="first">PloneBookmarklets</p>
<p>A Plone product that adds the ability to integrate documents with popular social
bookmarking sites.</p>
</li>
<li><p class="first">ProxyIndex</p>
<p>ProxyIndex is a plugin to zope catalog index.</p>
</li>
<li><p class="first">FileSystemStorage</p>
<p>FileSystemStorage is a product that provides the framework for content types to store data
directly on the filesystem, rather than in the ZODB.</p>
</li>
<li><p class="first">LinguaPlone</p>
<p>A tool to manage and maintain multilingual Plone content.</p>
</li>
</ol>
</li>
</ol>
</li>
<li><p class="first">Configure your Zope site</p>
<p>Now that all the necessary Zope products are installed it is time to clean up and
configure the site. The first task is to create a zope user and group in which
zope can run under. This can be done via the following:</p>
<pre class="literal-block">
sudo /usr/sbin/groupadd zope
sudo /usr/sbin/adduser -g zope -s /bin/false -d /opt/Zope-2.10.5 zope
</pre>
<p>Once that is done we can now set the proper permissions needed for Zope to run
securely. This can be done via the following:</p>
<pre class="literal-block">
cd /opt/Zope-2.10.5/web/Products
sudo chgrp -R zope *
sudo chmod go-w *
</pre>
<p>FileSystemStorage comes with its own documentation and we recommend you read it
(/opt/Zope-2.10.5/web/Products/FileSystemStorage/README.txt). Create folders for
storage and backup. We suggest setting things up in the following way:</p>
<pre class="literal-block">
cd /opt/Zope-2.10.5/web/var
mkdir fss_storage
mkdir fss_backup
</pre>
<p>Now edit the filesystemstorage.conf.in configuration file for FileSystemStorage located
in /opt/Zope-2.10.5/web/Products/FileSystemStorage/etc. There are several configuration
options here (see README.txt), but most can be left at the default. We suggest a
hierarchical file structure, which can be set up by uncommenting and editing this line:</p>
<pre class="literal-block">
# storage-strategy flat
change to:
storage-strategy site1
</pre>
<p>Zope needs to be able to write to the log directory, and its database files. To
enable this enter the following:</p>
<pre class="literal-block">
cd /opt/Zope-2.10.5/web
sudo chgrp -R zope log var
sudo chmod -R g+w log var
</pre>
<p>The last bit of configuration that needs to be done is to edit the zope.conf file.
found in the <em>etc/</em> directory of your Zope Instance. Uncomment and edit the
following settings:</p>
<pre class="literal-block">
effective-user zope
</pre>
<p>And set the default port you want the Zope server to run on:</p>
<pre class="literal-block">
&lt;http-server&gt;
  # valid keys are &quot;address and &quot;force-connection-close&quot;
  address 8080
  # force-connection-close on
&lt;/http-server&gt;
</pre>
</li>
<li><p class="first">Apply Security Patch</p>
<p>Plone's Security Panel is broken for Products that add Roles that come alphabetically
before 'Anonymous'. eduCommons adds the Administrator Role, which breaks the Security
Panel.  This is a documented bug (<a class="reference external" href="http://dev.plone.org/plone/ticket/7690">http://dev.plone.org/plone/ticket/7690</a>).</p>
<p>In order to remedy this problem, apply the patch found in the eduCommons/extras folder.
Copy the patch to /opt/Zope-2.10.5/web/lib/python/plone/app/controlpanel.</p>
<pre class="literal-block">
cd /opt/Zope-2.10.5/web/lib/python/plone/app/controlpanel
cp /opt/Zope-2.10.5/web/Products/eduCommons/extras/plone.app.controlpanel.security.py.patch .
</pre>
<p>Apply the patch by running the following command:</p>
<pre class="literal-block">
patch -p0 &lt; plone.app.controlpanel.security.py.patch
</pre>
<p>You may get this message: &quot;can't find file to patch at input line 1 Perhaps you used
the wrong -p or --strip option? File to patch:&quot; Enter the following:</p>
<pre class="literal-block">
security.py
</pre>
</li>
<li><p class="first">Overwrite Kupu's html2captioned transform</p>
<p>Kupu allows for dynamically generated captions on inserted images. eduCommons utilizes
this feature to provide license and copyright holder information for embedded images
in documents.  In order for this functionality to occur, the default transformation
must be customized</p>
<pre class="literal-block">
cp /opt/Zope-2.10.5/web/Products/eduCommons/extras/html2captioned.py /opt/Zope-2.10.5/web/Products/kupu/plone
</pre>
</li>
</ol>
</div>
<div class="section" id="ii-configuration-steps">
<h2>II. Configuration Steps</h2>
<ol class="arabic">
<li><p class="first">Launch Zope</p>
<p>Once Zope has been properly configured it can then be launched via the following
commands:</p>
<pre class="literal-block">
cd /opt/Zope-2.10.5/web
sudo bin/zopectl start
</pre>
<p>You should now be able to open a browser and go to the ZMI with the following URL
(assuming that you configured Zope to run on port 8080)</p>
<pre class="literal-block">
http://&lt;server name&gt;:8080/manage
</pre>
<p>You should then get a dialog prompt asking for your Zope admin username and password.</p>
</li>
<li><p class="first">Install eduCommons Product</p>
<p>Once you have logged into the ZMI via the management interface, you are now ready
to create the site. Start by creating a plone site with the pull down menu in the
top right corner. Give the plone site an ID and title. The ID will be used in the
URL to access the site, so name it appropriately. The title will appear several
places within the eduCommons install, and should be based on your group or institution.</p>
<p>Under &quot;Extension Profiles&quot; you need to do a multi-select (hold down the CTRL or the
Apple key). Select Working Copy Support (Iterate), ContentLicensing, IMSTransport, LinguaPlone,
PloneBookmarklets, Zip File Transport, eduCommons, and Left Skin so they are all highlighted.
Then click &quot;Add Plone Site.&quot;</p>
<p>Once the eduCommons instance has been created, you will need to QuickInstall the FileSystemStorage Product.
In the ZMI:</p>
<pre class="literal-block">
1. Navigate to your eduCommons instance
2. Navigate to portal_quickinstaller
3. Select the checkbox to the left of FileSystemStorage
4. Click Install
</pre>
<p>If you wish to localize content in other languages you will need to QuickInstall install LinguaPlone.
This can be done either now from the ZMI or later, via Site Setup --&gt; Add-on Products.
In the ZMI:</p>
<pre class="literal-block">
1. Navigate to your eduCommons instance
2. Navigate to portal_quickinstaller
3. Select the checkbox to the left of LinguPlone
4. Click Install
</pre>
<p>If you have installed LinguaPlone you will also need to select your supported languages.
In the ZMI:</p>
<pre class="literal-block">
1. Navigate to your eduCommons instance
2. Navigate to portal_languages
3. Select one or more Allowed languages (use the control or apple key to multi-select)
4. Click Save
</pre>
<p>Additional instructions for localizing content using LinguaPlone are available in LOCALIZATION.txt.</p>
<p>Finally, you need to reorder the Layers in your eduCommons Skins Selections.
In the ZMI:</p>
<pre class="literal-block">
1. Navigate to your eduCommons instance
2. Navigate to portal_skins
3. Click on the Properties tab
4. Under the Skins Selections, in the Layers textbox for LeftSkin, cut the LinguaPlone entry
   and paste it one a new line below the eduCommons entry
5. Click Save (be sure to click the Save button for the Skins selection section)
</pre>
</li>
<li><p class="first">Configure eduCommons</p>
<p>Additional configuration information is provided in SETUP.txt (or online at
<a class="reference external" href="http://cosl.usu.edu/projects/educommons/documentation/how-to/educommons-setup-instructions">http://cosl.usu.edu/projects/educommons/documentation/how-to/educommons-setup-instructions</a>).
This will help you to further customize eduCommons.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="footer">
<hr class="footer" />
<a class="reference external" href="INSTALL.txt">View document source</a>.
Generated on: 2008-04-09 18:43 UTC.
Generated by <a class="reference external" href="http://docutils.sourceforge.net/">Docutils</a> from <a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> source.

</div>
</body>
</html>
